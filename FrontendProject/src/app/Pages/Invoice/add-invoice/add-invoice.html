<div class="AddInvoice-container">

  <div *ngIf="isLoading" class="loading-overlay">
    <div class="spinner"></div>
  </div>

  <h1>INVOICE</h1>

  <div class="AddItem-container">
  
    <div class="table-container">
      <table class="Item-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Item Name</th>
            <th>Price</th>
            <th>Qty</th>
          </tr>
        </thead>
      </table>

      
      <div class="scrollable-body">
        <table class="Item-table">
          <tbody>
            <tr *ngFor="let Item of Items" (click)="selectItem(Item)">
              <td>{{ Item.id }}</td>
              <td>{{ Item.name }}</td>
              <td>{{ Item.price |  currency:'LKR. ':'symbol':'1.2-2'}}</td>
              <td>{{ Item.quantity }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    
    <div class="form-lable-container">
      <label class="label-pair">ID           :</label> <label class="highlight-label">{{ selectedItem.id }}</label><br>
      <label class="label-pair">NAME         :  </label> <label class="highlight-label">{{ selectedItem.name }}</label><br>
      <label class="label-pair">PRICE        :</label> <label class="highlight-label">{{ selectedItem.price |  currency:'LKR. ':'symbol':'1.2-2'}}</label><br>
      <label class="label-pair">AVAILABLE QTY:</label> <label class="highlight-label">{{ selectedItem.quantity }}</label><br>
    </div>

    <div class="form-container">
      <form (ngSubmit)="saveItem()">
        <label>Selling Qty:</label><br>
        <input type="text" [(ngModel)]="sellingItem.qty" name="qty" placeholder="Qty"><br>

        <label>Selling Price:</label><br>
        <input type="text" [(ngModel)]="sellingItem.price" name="price" placeholder="Price"><br>

        <label>Discount:</label><br>
        <input type="text" [(ngModel)]="sellingItem.discount" name="discount" placeholder="Discount"><br><br>

        <input type="submit" value="Save" class="Save-Btn-container">
      </form>
    </div>
  </div>

  <h2>ADDED ITEMS</h2>

  <div class="AddItem-container">
  <div class="Add-table-container">
    <table class="Item-table-1">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Available Qty</th>
          <th>Original Price</th>
          <th>Selling Qty</th>
          <th>Selling Price</th>
          <th>Discount</th>
          <th>Total Amount</th>
          <th>Actions</th>
        </tr>
      </thead>
    </table>

  
    
    <div class="scrollable-body-1">
      <table class="Item-table-1">
        <tbody>
          <tr *ngFor="let item of addedItems; let i = index">
            <td>{{ item.id }}</td>
            <td>{{ item.name }}</td>
            <td>{{ item.availableQty }}</td>
            <td>{{ item.originalPrice |  currency:'LKR. ':'symbol':'1.2-2'}}</td>
            <td>{{ item.sellingQty }}</td>
            <td>{{ item.sellingPrice |  currency:'LKR. ':'symbol':'1.2-2'}}</td>
            <td>{{ item.discount |  currency:'LKR. ':'symbol':'1.2-2'}}</td>
            <td>{{ item.sellingQty * item.sellingPrice - item.sellingQty * item.discount |  currency:'LKR. ':'symbol':'1.2-2'}}</td>
            <td>
              <button (click)="editItem(i)" class="edit">Edit</button>
              <button (click)="deleteItem(i)" class="delete">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <table class="Item-table">
      <tfoot>
        <tr>
          <td colspan="4"><strong></strong></td>
          <td><strong>Total Qty :- {{ getTotalQty() }}</strong></td>
          <td></td>
          <td></td>
          <td><strong>Total Amount :- {{ getTotalAmount() }}</strong></td>
          <td></td>
        </tr>
      </tfoot>
    </table>
  </div>
  

  <div class="form-container">
    <label for="INVOICENO">Invoice Number:</label><label style="color: coral; font-weight: bold;"> {{ invoiceNumber }}</label><br>
    <label for="customerSelect">Select a Customer Name:</label>
    <select id="customerSelect" [(ngModel)]="selectedCustomerId">
      <option value="">-- Select Customer --</option>
      <option *ngFor="let customer of customers" [value]="customer.id">{{ customer.name }}</option>
    </select>

    <p *ngIf="selectedCustomerId" style="display: none;">Customer ID: {{ selectedCustomerId }}</p>
  </div>
  <button class="FINALIZE-button" (click)="finalizeInvoice()">FINALIZE</button>
</div>

